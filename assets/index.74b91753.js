var re=Object.defineProperty,ne=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var oe=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var $=(e,r,t)=>r in e?re(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,u=(e,r)=>{for(var t in r||(r={}))oe.call(r,t)&&$(e,t,r[t]);if(_)for(var t of _(r))ae.call(r,t)&&$(e,t,r[t]);return e},d=(e,r)=>ne(e,se(r));import{c as le,a as ce,b as ie,d as ue,t as de,u as L,j as n,l as w,e as l,F as E,f as me,g as pe,h as fe,r as i,i as xe,k as T,m as D,n as he,o as ge,S as be,L as M,P as Ne,B as Se,R as we,p as O,q as Ee,s as ye}from"./vendor.dd5f156e.js";const Ae=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}};Ae();const U="USER/SET_NAME",j="USER/SET_COLOR",ve="USER/SET_ERROR",G="USER/SET_STATUS",Ie="USER/SET_ADMIN_TOKEN",P="USER/SET_ID",Ce={name:"",color:"red",status:"UNSIGNED",error:"",adminToken:"",id:""};function Te(e=Ce,{type:r,payload:t,cb:o}){var s;switch(r){case j:return d(u({},e),{color:t});case U:return d(u({},e),{name:t});case ve:return d(u({},e),{error:t});case G:return d(u({},e),{status:(s=o==null?void 0:o(e))!=null?s:t});case Ie:return d(u({},e),{adminToken:t});case P:return d(u({},e),{id:t})}return e}const ke="GAME/SET_ADMIN",F="GAME/SET_ROOM_ID",B="GAME/FILL_PLAYERS",Re="GAME/SET_AVAILABLE_COLORS",W="GAME/SET_STATUS",z="GAME/SET_ROUND",q="GAME/SET_RESULTS",K="GAME/FILL_UNKNOWN_ANSWERS",y=["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose"],_e={players:[],roomId:"",admin:!1,round:null,status:"WAITING_PLAYERS",availableColors:y,results:[],unknownAnswers:[]};function $e(e=_e,{type:r,payload:t}){switch(r){case B:return d(u({},e),{players:t});case F:return d(u({},e),{roomId:t});case ke:return d(u({},e),{admin:t});case W:return d(u({},e),{status:t});case Re:return d(u({},e),{availableColors:t});case z:return d(u({},e),{round:t});case q:return d(u({},e),{results:t});case K:return d(u({},e),{unknownAnswers:t})}return e}const Le=le({user:Te,game:$e});function De(){return ce(Le,ie(ue(de)))}const x=()=>L(e=>e.user),N=()=>L(e=>e.game);function k({items:e,children:r,className:t}){return n("ul",{className:t!=null?t:"",children:e.map((o,s)=>n("li",{children:r(o,s)},s))})}function Me({}){const{players:e}=N(),{color:r,status:t,id:o}=x();return n(k,{items:w.exports.sortBy(e,"score").reverse(),className:`bg-${r}-300 h-auto py-8 rounded-r-xl`,children:({name:s,score:a,color:c,admin:m,id:p},h)=>l("div",{className:`bg-${c}-500 py-2 px-4 text-white flex justify-between items-center`,children:[n("b",{className:"font-bold block w-1/3",children:s}),l("p",{className:"text-right text-sm md:text-base w-1/5 lg:w-1/6",children:[!h&&n(E,{className:"ml-2 text-yellow-400 lh",icon:me,title:`${s} va ganando`}),m&&n(E,{className:"ml-2 text-grey-100",icon:pe,title:`${s} es administrador`}),t==="ADMIN"&&o!==p&&n(E,{className:"ml-2 text-red-800 cursor-pointer",icon:fe,title:`eliminar a ${s} de la sala`})]}),n("p",{className:`w-20 bg-${c}-600 rounded-full text-right px-2`,children:a})]})})}function V(e=t=>{},r=[]){return i.exports.useCallback(t=>{t.preventDefault(),e(t)},r)}const Oe="http://localhost:3000",f=xe(Oe,{forceNew:!0});function Y(e){if(/^\S[a-z0-9ñáéíóú\s_]+\S$/i.test(e))return localStorage.setItem("name",e),{type:U,payload:e}}function H(e){if(y.includes(e))return localStorage.setItem("color",e),{type:j,payload:e}}function J(e){return{type:G,cb({status:r}){return r==="ADMIN"?r:e}}}function Ue(e){return{type:P,payload:e}}function je(){return e=>{f.on("guest:becomeplayer",({id:r})=>{e(Ue(r)),e(J("ACCEPTED"))}),f.on("player:becomeadmin",()=>e(J("ADMIN")))}}function Ge(){return e=>{const r=localStorage.getItem("name"),t=localStorage.getItem("color");r&&e(Y(r)),t&&e(H(t))}}function Pe(){return(e,r)=>{const{user:{name:t,color:o},game:{roomId:s}}=r();f.emit("player:enter",{name:t,color:o,roomId:s}),localStorage.setItem("name",t),localStorage.setItem("color",o)}}function Fe(e){return r=>r(Y(e))}function Be(e){return r=>r(H(e))}function A({color:e,children:r,onClick:t,className:o,type:s,enabled:a}){const c=e!=null?e:x().color,m=a!=null?a:!0,p=m?`bg-${c}-500`:"bg-gray-200 cursor-not-allowed";return n("button",{className:`${p} text-white mt-4 rounded-3xl w-full lg:w-2/5 py-2 mx-auto block ${o!=null?o:""}`,role:"button",onClick:t,type:s!=null?s:"button",enabled:m.toString(),children:r})}function We({}){const{color:e}=x(),r=T();return n("div",{className:"flex flex-wrap justify-center gap-2 m-0",children:y.map(t=>n("label",{className:`bg-${t}-500 ${e===t&&"border-gray-200 border-4"} circle h-6 w-6 rounded-full block cursor-pointer`,children:n("input",{onChange:()=>r(Be(t)),value:t,className:"hidden",name:"color",type:"radio"})},t))})}function R({setter:e,className:r,placeholder:t,children:o,validator:s,inputClassName:a}){var g;const[c,m]=i.exports.useState(""),[p,h]=i.exports.useState(""),[C,S]=i.exports.useState(!0);return i.exports.useEffect(()=>{if(!s){e(p);return}const[b,te]=s(p);b?(m(b),e("")):(e(te),m(""))},[p]),l("label",{className:`py-3 inline-block ${r}`,children:[n("input",{className:"rounded-full px-4 py-2 w-full inline-block "+a,placeholder:(g=t!=null?t:o)!=null?g:"",onChange:b=>{h(b.target.value),S(!1)},type:"text"}),!C&&c?n("p",{className:"text-red-500",children:c}):""]})}function v({color:e,children:r,className:t}){const o=e!=null?e:x().color;return n("div",{className:`bg-${o}-300 w-11/12 lg:w-3/5 rounded-3xl mx-auto  p-8 relative my-auto ${t}`,children:r})}function ze(){const e=T(),[r,t]=i.exports.useState(""),o=i.exports.useCallback(a=>/^\s/.test(a)||/\s$/.test(a)?["Tu nombre no puede empezar ni terminar con espacios"]:/^[a-z0-9ñáéíóú\s_]*$/i.test(a)?[!1,a]:["Tu nombre solo debe incluir n\xFAmeros, letras, espacios o guiones bajos"],[]),s=i.exports.useCallback(()=>{e(Fe(r)),e(Pe())},[r]);return i.exports.useEffect(()=>e(Ge()),[]),n(v,{children:l("form",{onSubmit:V(),children:[n(R,{setter:t,validator:o,className:"w-full",children:"\xA1ingresa tu nombre!"}),n(We,{}),n(A,{onClick:s,enabled:r!=="",children:"\xA1Comenzar!"})]})})}function I({children:e,color:r,message:t,className:o}){const s=r!=null?r:x().color;return l(v,{className:o,children:[n("div",{className:"flex justify-center mb-2",children:n("div",{className:`w-12 h-12 
          animate-spin 
          border-${s}-600 border-l-${s}-300 
          border-4 rounded-full
        `})}),l("p",{className:`text-center text-${s}-600 text-xl font-semibold mb-8`,children:[t!=null?t:"Esperando","..."]}),e!=null?e:""]})}function Q({}){const e=location.href,{color:r,name:t}=x(),[o,s]=D(`${t} te est\xE1 invitando a jugar \xA1Basta!

\xDAnete usando el link ${e}`,{successDuration:3e4}),[a,c]=D(e,{successDuration:3e4});return l("div",{className:"",children:[n("p",{className:"text-center mb-2 text-md",children:"Env\xEDales este link a tus amigos para invitarlos a jugar"}),l("div",{onClick:c,className:`bg-${r}-200 text-sm lg:text-md cursor-pointer rounded-full px-4 py-2 w-full flex justify-between items-center`,children:[n("p",{children:e}),n(E,{icon:he,className:"mt-1"})]}),n(A,{className:"",onClick:s,enabled:!0,children:o||a?"\xA1Copiado!":"Copiar invitaci\xF3n"})]})}function X({message:e,children:r}){var t;return n(I,{message:(t=r!=null?r:e)!=null?t:null,children:n(Q,{})})}function Z({color:e,hideMessage:r,className:t,children:o}){var p;const s=x(),{roomId:a}=N(),c=(p=s.color)!=null?p:e,m=i.exports.useCallback(()=>f.emit("admin:startgame",{roomId:a}),[]);return l(v,{className:t,children:[r||n("p",{className:`text-center text-${c}-600 text-xl font-semibold mb-4`,children:"\xA1Ya hay rivales en espera!"}),s.status==="ADMIN"&&n(A,{className:"mb-4",onClick:m,children:o!=null?o:"Iniciar partida"}),n(Q,{})]})}function qe(e){return e.split(`
`).map(r=>r.trim()).join(" ")}function Ke({children:e,circleMessage:r,className:t}){const{color:o}=x();return l(v,{className:`my-20 lg:my-auto ${t}`,children:[n("div",{className:qe(`
        bg-${o}-500
        absolute inset-0 -translate-y-1/2
        h-24 w-24 pt-4
        text-white font-bold text-center text-6xl
        rounded-full mx-auto
        `),children:r}),e]})}function Ve(e){const r=[],t=[];return e.forEach(o=>{const[s,a]=i.exports.useState(o);r.push(s),t.push(a)}),[r,t]}function Ye(e=!1){const[r,t]=i.exports.useState(e);return{value:r,setValue:t,toggle:()=>t(!r),makeTrue:()=>t(!0),makeFalse:()=>t(!1)}}function He(){const[e,r]=Ve(["","","","",""]),[t,o]=i.exports.useState(20),{value:s,makeTrue:a}=Ye(),{id:c}=x(),{roomId:m,round:{letter:p,categories:h}}=N(),C=i.exports.useCallback(g=>(g+1)%3||"md:col-span-2",[]),S=i.exports.useCallback(()=>{f.emit("player:sendanswers",{answers:e,roomId:m,authorId:c}),a()},[e]);return i.exports.useEffect(()=>{f.on("countdown:count",({timeLeft:g})=>o(g))},[]),i.exports.useEffect(()=>{t===1&&S()},[S,t]),l("div",{className:"w-full",children:[l(I,{className:s||"hidden",message:"Esperando las respuestas de los dem\xE1s",children:["Respuestas en ",t," segundos."]}),n(Ke,{className:s&&"hidden",circleMessage:t<20?t:p,children:l("form",{onSubmit:V(),className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-12",children:[h.map((g,b)=>n(R,{setter:r[b],className:`py-1 ${C(b)}`,children:g},b)),n(A,{onClick:S,className:"md:col-span-2",type:"submit",children:"Enviar respuestas"})]})})]})}function Je({}){const{results:e,players:r}=N(),{color:t}=x();return l("div",{className:"w-11/12 lg:w-4/5 my-8 lg:h-[75vh] lg:overflow-y-auto",children:[Object.entries(w.exports.groupBy(e,"category")).map(([o,s])=>s?l("div",{className:`bg-${t}-300 py-4 rounded-xl w-full mb-5`,children:[n("p",{className:"text-lg text-center pl-4",children:o}),n(k,{items:w.exports.sortBy(s,"points").reverse(),children:({answer:a,points:c,authorId:m})=>{const{name:p,color:h}=w.exports.find(r,{id:m});return l("div",{className:`bg-${h}-500 py-2 px-4 text-white flex justify-between`,children:[n("p",{className:"w-1/4",children:p}),n("p",{className:"font-bold w-1/2",children:a||"---"}),n("p",{className:`w-16 bg-${h}-600 rounded-full text-center px-2`,children:c})]})}})]},o):""),n(Z,{hideMessage:!0,children:"Continuar"})]})}function Qe(e){return{type:F,payload:e}}function ee(e){return{type:B,payload:e}}function Xe(e){return{type:W,payload:e}}function Ze(e){return{type:z,payload:e}}function et(e){return{type:q,payload:e}}function tt(e){return{type:K,payload:e}}function rt(){return e=>{f.on("room:update",({players:r,status:t})=>{e(ee(r)),e(Xe(t))}),f.on("room:preview",({players:r})=>{e(ee(r))})}}function nt(e){return r=>{r(Qe(e)),f.emit("guest:enter",{roomId:e})}}function st(){return e=>{f.on("game:start",r=>e(Ze(r))),f.on("game:unknownanswers",r=>e(tt(r))),f.on("game:results",r=>e(et(r))),f.on("echo",console.log)}}function ot(){return e=>{}}function at({}){const{unknownAnswers:e,roomId:r}=N(),{color:t}=x(),o=i.exports.useCallback(s=>()=>f.emit("admin:evaluateword",d(u({},s),{roomId:r})),[]);return l("div",{className:"w-11/12 lg:w-4/5 lg:h-[75vh] lg:overflow-y-auto",children:[n("h2",{className:"text-2xl mb-4",children:"Por favor, ayudanos a revisar estas palabras"}),Object.entries(w.exports.groupBy(e,"category")).map(([s,a])=>a?l("div",{className:`bg-${t}-300 py-4 rounded-xl w-full mb-5`,children:[n("p",{className:"text-lg text-center pl-4",children:s}),n(k,{items:a,children:({answer:c},m)=>l("div",{className:`bg-${y[m%16]}-400 py-2 px-4 text-white flex flex-col md:flex-row justify-between`,children:[n("p",{className:"font-bold block sm:w-1/2 text-center sm:text-left",children:c}),l("div",{className:"text-center",children:[n("button",{className:"bg-green-500 px-3 rounded-md mr-3",title:"aceptar con 100",onClick:o({category:s,answer:c,points:100}),children:"100"}),n("button",{className:"bg-lime-500 px-3 rounded-md mr-3",title:"aceptar con 50",onClick:o({category:s,answer:c,points:50}),children:"50"}),n("button",{className:"bg-red-500 px-3 rounded-md ",title:"rechazar palabra",onClick:o({category:s,answer:c,points:0}),children:"rechazar"})]})]})})]},s):"")]})}function lt(){const e=T(),{roomId:r}=ge(),{color:t,status:o}=x(),{status:s,round:a,results:c}=N();return i.exports.useEffect(()=>{e(nt(r)),e(je()),e(rt()),e(st()),e(ot())},[]),l("div",{className:`bg-${t}-100 h-full min-h-screen justify-around flex flex-col-reverse lg:flex-row`,children:[n("aside",{className:"w-11/12 md:w-1/2 lg:w-1/4 px-0 lg:pt-16 min-h-[12em] lg:h-screen",children:n(Me,{})}),n("main",{className:"flex justify-center items-center lg:w-3/4 lg:h-screen",children:(()=>{if(o==="UNSIGNED")return n(ze,{});switch(s){case"WAITING_PLAYERS":return c.length?n(Je,{}):n(X,{children:"Esperando jugadores"});case"WAITING_ADMIN":return o==="ADMIN"?n(Z,{}):n(X,{children:"Esperando que el administrador empieze la partida"});case"AT_ROUND":return a?n(He,{}):n(I,{message:"Iniciando la partida",children:"Por favor, espera un poco"});case"WAITING_UNKNOWN_WORDS":return o==="ADMIN"?n(at,{}):n(I,{message:"Revisando los resultados",children:"Algunas palabras no est\xE1n en la base de datos ...por ahora"})}})()})]})}const ct=new be({length:6});function it(){const e=ct(),[r,t]=i.exports.useState("");return l("main",{className:"flex flex-col justify-center items-center py-4",children:[l("div",{className:"w-4/5 h-[75vh] flex flex-col justify-center",children:[n("h1",{className:"text-5xl mb-11 md:mb-6",children:"\xA1basta!"}),n("h2",{className:"text-2xl text-gray-500 mb-8",children:"\xA1El divertido juego de pensar palabras, tra\xEDdo del papel a la web!"}),l("div",{className:"flex flex-col md:flex-row gap-2 items-center",children:[n(M,{to:"/"+e,className:"bg-blue-500 p-3 text-white rounded-full text-center w-5/6 md:w-auto md:px-8",children:"Nuevo juego"}),n("p",{className:"font-medium text-xl mx-2",children:"\xF3"}),l("div",{className:"inline-block rounded-full py-0 relative w-5/6 md:w-auto",children:[n(R,{setter:t,inputClassName:"py-0 pr-20 border-2 border-emerald-500",children:"entrar en una sala"}),n(M,{to:"/"+r.split("/").reverse()[0],className:"bg-emerald-500 text-white py-2 px-8 rounded-full \r absolute top-3.5 border-3 border-emerald-500 right-0",children:"Unirme"})]})]})]}),l("div",{className:"w-4/5 text-gray-700",children:[n("h3",{className:"text-3xl mb-3",children:"Reglas:"}),l("ul",{children:[n("li",{children:"Seleccionaremos una letra y 5 divertidas categor\xEDas"}),n("li",{children:"Cada jugador debe pensar una palabra de cada categoria que empieze con esa letra"}),n("li",{children:"Cada jugador que elija una palabra que no hayan elegido los otros gana 100 puntos. Si 2 o m\xE1s jugadores eligen la misma palabra, ambos ganan 50 puntos. Si la palabra est\xE1 mal escrita o no existe, no ganas puntos"})]})]})]})}function ut(){return n(Ne,{store:De(),children:n(Se,{children:l(we,{children:[n(O,{path:"/",element:n(it,{})}),n(O,{path:"/:roomId",element:n(lt,{})})]})})})}Ee.render(n(ye.StrictMode,{children:n(ut,{})}),document.getElementById("root"));
